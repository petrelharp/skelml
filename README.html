<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="pandoc.css" type="text/css" />
</head>
<body>
<h1 id="skelml">skelml</h1>
<p>This is a skeleton for a project that</p>
<ol>
<li>contains LaTeX and/or markdown files<br /></li>
<li>is checked into a git repository, and<br /></li>
<li>has products automatically compiled into xhtml/html and pushed to github pages.</li>
</ol>
<h2 id="workflow">Workflow</h2>
<ol>
<li>Edit LaTeX.<br /></li>
<li><p>Run</p>
<pre><code>make display</code></pre></li>
<li>Look at the output, which lives in <code>display/</code>; revise; repeat.<br /></li>
<li>Commit changes. (<code>git commit -a</code>)<br /></li>
<li><p>When it all looks good, run</p>
<pre><code>make publish</code></pre></li>
<li><p>When you update your github repository, also update the gh-pages branch, e.g. by:</p>
<pre><code>git push origin --all</code></pre>
<p>or, to be specific</p>
<pre><code>git push origin master:master
git push origin gh-pages:gh-pages</code></pre>
Then, the web page for your project will have nice, freshly updated html made from your latex and markdown documents.<br /></li>
<li><p>If you want pdfs, in <code>display/</code>, do</p>
<pre><code>make pdfs</code></pre></li>
<li><p>Occasionally, run</p>
<pre><code>make clean</code></pre>
<p>to keep things tidy.</p></li>
</ol>
<h2 id="prerequisites">Prerequisites</h2>
<ol>
<li><a href="http://dlmf.nist.gov/LaTeXML">LaTeXML</a><br /></li>
<li><a href="https://github.com/jgm/pandoc">pandoc</a><br /></li>
<li><a href="http://git-scm.com/">git</a><br /></li>
<li><a href="http://github.com">github account</a> or else modify to push to your own web server; see below.</li>
</ol>
<h2 id="how-to-use-it">How to use it</h2>
<ol>
<li><a href="https://github.com/petrelharp/skelml/zipball/master">Download</a> the source from this project, unzip it, and rename the resulting directory to whatever you want your project to be called.<br /></li>
<li>Initialize a git repository in that directory and add the files to the repository. (<code>git init .; git add $(git ls-files --other); git commit -a -m 'initial skeleton'</code>)<br /></li>
<li>Run <code>make setup</code> to set up the <code>gh-pages</code> branch.<br /></li>
<li>Get some source files in there. Add them to the repository (<code>git add</code>).<br /></li>
<li>Follow &quot;Workflow&quot; above.</li>
</ol>
<h2 id="how-it-works">How it works:</h2>
<ol>
<li><code>make display</code> runs <a href="http://dlmf.nist.gov/LaTeXML">LaTeXML</a> on all <code>.tex</code> files, and <a href="http://johnmacfarlane.net/pandoc/">pandoc</a> on all the <code>.md</code> files to create the html/xhtml in <code>display/</code>.<br /></li>
<li>The <code>gh-pages</code> branch keeps a copy of everything in the <code>display/</code> directory. <code>make publish</code> checks out <code>gh-pages</code>, and updates from <code>display/</code>, removing from the index all files no longer present. This means anything in <code>display/</code> you check into git will '''not appear in gh-pages'''.</li>
</ol>
<h2 id="notes">Notes</h2>
<ol>
<li>You could replace the &quot;push to gh-pages&quot; step with updating a static website, as <a href="http://nicolasgallagher.com/simple-git-deployment-strategy-for-static-sites/">described here</a>.<br /></li>
<li>This automatically creates an <code>index.xhtml</code> page for you; to make your own, just create an index.md or index.tex file.</li>
</ol>
<h2 id="troubleshooting">Troubleshooting</h2>
<ol>
<li>Do <em>not</em> put spaces in the file names. This will confuse <code>make</code> a whole lot.<br /></li>
<li><p>If you get the error</p>
<pre><code>/bin/bash: latexml: command not found</code></pre>
<p>then you need to either put the <code>latexml</code> executable in your <code>PATH</code>, or else add its full path to the <code>makefile</code>, e.g.</p>
<pre><code>LATEXML = /path/to/latexml</code></pre>
<p>and likewise for <code>latexmlc</code> and <code>latexmlpost</code>.</p></li>
</ol>
<h2 id="to-do">To-do</h2>
<ol>
<li>Should also automatically copy over tracked <code>.html</code>, etcetera files?<br /></li>
<li>Make it so we don't have to <code>clean</code> out all the latexml'ed temporary image files all the time?</li>
</ol>
</body>
</html>
